// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.857
package partials

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "github.com/freitasmatheusrn/lifecycle-monitor/internal/views/components"

func ProductForm() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div id=\"product-modal\" class=\"fixed inset-0 bg-brand/40 backdrop-blur-sm flex items-center justify-center z-50 p-4\"><div class=\"bg-surface rounded-xl shadow-lg border border-sidebar-border w-full max-w-md animate-in fade-in zoom-in-95 duration-200\"><!-- Form View --><div id=\"form-view\"><!-- Header --><div class=\"flex justify-between items-center p-5 border-b border-sidebar-border\"><div><h2 class=\"text-lg font-semibold text-brand\">Adicionar Produto</h2><p class=\"text-sm text-brand-500 mt-0.5\">Insira códigos ou importe uma planilha</p></div><button onclick=\"this.closest(&#39;.fixed&#39;).remove()\" class=\"p-2 rounded-lg text-brand-400 hover:text-brand hover:bg-surface-muted transition-colors\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg></button></div><!-- Tabs --><div class=\"flex border-b border-sidebar-border\"><button id=\"tab-manual\" type=\"button\" onclick=\"switchTab(&#39;manual&#39;)\" class=\"flex-1 px-4 py-3 text-sm font-medium text-brand border-b-2 border-brand transition-colors\"><svg class=\"w-4 h-4 inline-block mr-1.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path></svg> Manual</button> <button id=\"tab-import\" type=\"button\" onclick=\"switchTab(&#39;import&#39;)\" class=\"flex-1 px-4 py-3 text-sm font-medium text-brand-400 border-b-2 border-transparent hover:text-brand hover:bg-surface-muted transition-colors\"><svg class=\"w-4 h-4 inline-block mr-1.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path></svg> Importar Planilha</button></div><!-- Manual Form --><div id=\"tab-content-manual\" class=\"p-5 space-y-5\"><!-- Code input --><div class=\"space-y-1.5\"><label class=\"block text-sm font-medium text-brand\">Código do Produto</label><div class=\"flex gap-2\"><input type=\"text\" id=\"code-input\" placeholder=\"Ex: 6ES7511-1AK02-0AB0\" class=\"flex-1 bg-surface border border-sidebar-border rounded-lg px-3 py-2.5 text-sm text-brand placeholder:text-brand-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-brand/20 focus:border-brand-300 hover:border-brand-300\"> <button type=\"button\" onclick=\"addCode()\" class=\"px-4 py-2.5 bg-brand text-white rounded-lg text-sm font-medium hover:bg-brand-800 transition-all duration-200 active:scale-[0.98]\">Adicionar</button></div></div><!-- Codes list --><div class=\"space-y-1.5\"><label class=\"block text-sm font-medium text-brand\">Códigos Adicionados <span class=\"text-brand-400 font-normal ml-1\" id=\"codes-count\">(0)</span></label> <select id=\"codes-select\" multiple size=\"5\" class=\"w-full bg-surface border border-sidebar-border rounded-lg px-3 py-2.5 text-sm text-brand transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-brand/20 focus:border-brand-300\"></select><p class=\"text-xs text-brand-400\">Selecione um código e pressione <kbd class=\"px-1.5 py-0.5 bg-surface-muted rounded text-brand-500 font-mono text-xs\">Delete</kbd> para remover</p></div><!-- Actions --><div class=\"flex gap-3 justify-end pt-2\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "Cancelar")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.Button(components.ButtonProps{
			Type:    "button",
			Variant: components.ButtonSecondary,
			Class:   "onclick:this.closest('.fixed').remove()",
		}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<button id=\"submit-btn\" type=\"button\" class=\"inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 px-4 py-2.5 text-sm rounded-lg bg-brand text-white hover:bg-brand-800 focus:ring-brand/30 active:scale-[0.98]\"><svg class=\"w-4 h-4 mr-1.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg> Adicionar Produtos</button></div></div><!-- Import Form --><div id=\"tab-content-import\" class=\"p-5 space-y-5 hidden\"><!-- File input --><div class=\"space-y-1.5\"><label class=\"block text-sm font-medium text-brand\">Arquivo da Planilha</label><div id=\"drop-zone\" class=\"border-2 border-dashed border-sidebar-border rounded-lg p-6 text-center hover:border-brand-300 hover:bg-surface-muted/50 transition-all duration-200 cursor-pointer\" onclick=\"document.getElementById(&#39;file-input&#39;).click()\"><input type=\"file\" id=\"file-input\" accept=\".xlsx,.xls,.csv\" class=\"hidden\"> <svg class=\"w-10 h-10 mx-auto text-brand-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg><p class=\"text-sm text-brand-500 mb-1\">Clique para selecionar ou arraste o arquivo</p><p class=\"text-xs text-brand-400\">Formatos aceitos: .xlsx, .xls, .csv</p></div><div id=\"file-info\" class=\"hidden\"><div class=\"flex items-center gap-3 p-3 bg-surface-muted rounded-lg\"><svg class=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg><div class=\"flex-1 min-w-0\"><p id=\"file-name\" class=\"text-sm font-medium text-brand truncate\"></p><p id=\"file-size\" class=\"text-xs text-brand-400\"></p></div><button type=\"button\" onclick=\"clearFile()\" class=\"p-1.5 rounded-lg text-brand-400 hover:text-red-600 hover:bg-red-50 transition-colors\"><svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg></button></div></div></div><!-- Import result --><div id=\"import-result\" class=\"hidden space-y-3\"><div id=\"import-success\" class=\"hidden p-4 bg-green-50 border border-green-200 rounded-lg\"><div class=\"flex items-center gap-2 text-green-700\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path></svg> <span id=\"import-success-text\" class=\"text-sm font-medium\"></span></div></div><div id=\"import-error\" class=\"hidden p-4 bg-red-50 border border-red-200 rounded-lg\"><div class=\"flex items-center gap-2 text-red-700\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg> <span id=\"import-error-text\" class=\"text-sm font-medium\"></span></div></div></div><!-- Actions --><div class=\"flex gap-3 justify-end pt-2\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var3 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "Cancelar")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.Button(components.ButtonProps{
			Type:    "button",
			Variant: components.ButtonSecondary,
			Class:   "onclick:this.closest('.fixed').remove()",
		}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var3), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<button id=\"import-btn\" type=\"button\" disabled class=\"inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 px-4 py-2.5 text-sm rounded-lg bg-brand text-white hover:bg-brand-800 focus:ring-brand/30 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed\"><svg id=\"import-btn-icon\" class=\"w-4 h-4 mr-1.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"></path></svg> <svg id=\"import-btn-spinner\" class=\"w-4 h-4 mr-1.5 animate-spin hidden\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg> <span id=\"import-btn-text\">Importar Planilha</span></button></div></div></div><!-- Import Loading View --><div id=\"import-loading-view\" class=\"hidden\"><!-- Header --><div class=\"flex justify-between items-center p-5 border-b border-sidebar-border\"><div><h2 id=\"import-loading-title\" class=\"text-lg font-semibold text-brand\">Importando Planilha</h2><p id=\"import-loading-subtitle\" class=\"text-sm text-brand-500 mt-0.5\">Processando dados...</p></div><div class=\"p-2\"><svg class=\"w-5 h-5 animate-spin text-brand\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg></div></div><!-- Progress Content --><div class=\"p-5 space-y-5\"><!-- Phase indicator --><div class=\"flex items-center gap-3\"><div id=\"phase-import-indicator\" class=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-brand/10 text-brand text-sm font-medium\"><svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"></path></svg> <span>Importando</span></div><svg class=\"w-4 h-4 text-brand-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path></svg><div id=\"phase-crawl-indicator\" class=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface-muted text-brand-400 text-sm font-medium\"><svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path></svg> <span>Buscando Dados</span></div></div><!-- Progress Bar --><div class=\"space-y-2\"><div class=\"flex justify-between text-sm\"><span id=\"import-progress-label\" class=\"text-brand-500\">Importando produtos...</span> <span id=\"import-progress-text\" class=\"text-brand font-medium\">0 / 0</span></div><div class=\"w-full bg-surface-muted rounded-full h-2.5 overflow-hidden\"><div id=\"import-progress-bar\" class=\"bg-brand h-full rounded-full transition-all duration-300 ease-out\" style=\"width: 0%\"></div></div></div><!-- Current Code --><div class=\"space-y-1.5\"><label class=\"block text-sm font-medium text-brand\">Processando agora</label><div id=\"import-current-code\" class=\"bg-brand/10 border border-brand/20 rounded-lg px-4 py-3 text-brand font-mono text-sm flex items-center gap-2\"><svg class=\"w-4 h-4 animate-pulse text-brand\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"></path></svg> <span>-</span></div></div><!-- Stats --><div class=\"grid grid-cols-3 gap-3\"><div class=\"bg-green-50 border border-green-200 rounded-lg p-3 text-center\"><p id=\"import-stat-success\" class=\"text-xl font-bold text-green-700\">0</p><p class=\"text-xs text-green-600\">Sucesso</p></div><div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center\"><p id=\"import-stat-updated\" class=\"text-xl font-bold text-yellow-700\">0</p><p class=\"text-xs text-yellow-600\">Atualizados</p></div><div class=\"bg-red-50 border border-red-200 rounded-lg p-3 text-center\"><p id=\"import-stat-failed\" class=\"text-xl font-bold text-red-700\">0</p><p class=\"text-xs text-red-600\">Falhas</p></div></div></div></div><!-- Loading View --><div id=\"loading-view\" class=\"hidden\"><!-- Header --><div class=\"flex justify-between items-center p-5 border-b border-sidebar-border\"><div><h2 class=\"text-lg font-semibold text-brand\">Buscando Produtos</h2><p class=\"text-sm text-brand-500 mt-0.5\">Aguarde enquanto buscamos os dados...</p></div><div class=\"p-2\"><svg class=\"w-5 h-5 animate-spin text-brand\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg></div></div><!-- Progress Content --><div class=\"p-5 space-y-5\"><!-- Progress Bar --><div class=\"space-y-2\"><div class=\"flex justify-between text-sm\"><span class=\"text-brand-500\">Progresso</span> <span id=\"progress-text\" class=\"text-brand font-medium\">0 / 0</span></div><div class=\"w-full bg-surface-muted rounded-full h-2.5 overflow-hidden\"><div id=\"progress-bar\" class=\"bg-brand h-full rounded-full transition-all duration-300 ease-out\" style=\"width: 0%\"></div></div></div><!-- Current Code --><div class=\"space-y-1.5\"><label class=\"block text-sm font-medium text-brand\">Buscando agora</label><div id=\"current-code\" class=\"bg-brand/10 border border-brand/20 rounded-lg px-4 py-3 text-brand font-mono text-sm flex items-center gap-2\"><svg class=\"w-4 h-4 animate-pulse text-brand\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path></svg> <span>-</span></div></div><!-- Codes List --><div class=\"space-y-1.5\"><label class=\"block text-sm font-medium text-brand\">Códigos na fila</label><div id=\"codes-queue\" class=\"bg-surface border border-sidebar-border rounded-lg max-h-40 overflow-y-auto\"></div></div></div></div></div></div><script>\n\t\tconst productFormState = {\n\t\t\tcodes: [],\n\t\t\teventSource: null,\n\t\t\tselectedFile: null\n\t\t};\n\n\t\tfunction switchTab(tab) {\n\t\t\tconst tabManual = document.getElementById('tab-manual');\n\t\t\tconst tabImport = document.getElementById('tab-import');\n\t\t\tconst contentManual = document.getElementById('tab-content-manual');\n\t\t\tconst contentImport = document.getElementById('tab-content-import');\n\n\t\t\tif (tab === 'manual') {\n\t\t\t\ttabManual.classList.add('text-brand', 'border-brand');\n\t\t\t\ttabManual.classList.remove('text-brand-400', 'border-transparent');\n\t\t\t\ttabImport.classList.remove('text-brand', 'border-brand');\n\t\t\t\ttabImport.classList.add('text-brand-400', 'border-transparent');\n\t\t\t\tcontentManual.classList.remove('hidden');\n\t\t\t\tcontentImport.classList.add('hidden');\n\t\t\t} else {\n\t\t\t\ttabImport.classList.add('text-brand', 'border-brand');\n\t\t\t\ttabImport.classList.remove('text-brand-400', 'border-transparent');\n\t\t\t\ttabManual.classList.remove('text-brand', 'border-brand');\n\t\t\t\ttabManual.classList.add('text-brand-400', 'border-transparent');\n\t\t\t\tcontentImport.classList.remove('hidden');\n\t\t\t\tcontentManual.classList.add('hidden');\n\t\t\t}\n\t\t}\n\n\t\tfunction formatFileSize(bytes) {\n\t\t\tif (bytes === 0) return '0 Bytes';\n\t\t\tconst k = 1024;\n\t\t\tconst sizes = ['Bytes', 'KB', 'MB', 'GB'];\n\t\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\t\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n\t\t}\n\n\t\tfunction handleFileSelect(file) {\n\t\t\tif (!file) return;\n\n\t\t\tconst validTypes = [\n\t\t\t\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t\t\t\t'application/vnd.ms-excel',\n\t\t\t\t'text/csv'\n\t\t\t];\n\t\t\tconst validExtensions = ['.xlsx', '.xls', '.csv'];\n\t\t\tconst fileName = file.name.toLowerCase();\n\t\t\tconst hasValidExtension = validExtensions.some(ext => fileName.endsWith(ext));\n\n\t\t\tif (!validTypes.includes(file.type) && !hasValidExtension) {\n\t\t\t\tif (window.showToast) {\n\t\t\t\t\twindow.showToast('danger', 'Formato de arquivo invalido. Use .xlsx, .xls ou .csv');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tproductFormState.selectedFile = file;\n\t\t\tdocument.getElementById('drop-zone').classList.add('hidden');\n\t\t\tdocument.getElementById('file-info').classList.remove('hidden');\n\t\t\tdocument.getElementById('file-name').textContent = file.name;\n\t\t\tdocument.getElementById('file-size').textContent = formatFileSize(file.size);\n\t\t\tdocument.getElementById('import-btn').disabled = false;\n\n\t\t\t// Hide any previous results\n\t\t\tdocument.getElementById('import-result').classList.add('hidden');\n\t\t\tdocument.getElementById('import-success').classList.add('hidden');\n\t\t\tdocument.getElementById('import-error').classList.add('hidden');\n\t\t}\n\n\t\tfunction clearFile() {\n\t\t\tproductFormState.selectedFile = null;\n\t\t\tdocument.getElementById('file-input').value = '';\n\t\t\tdocument.getElementById('drop-zone').classList.remove('hidden');\n\t\t\tdocument.getElementById('file-info').classList.add('hidden');\n\t\t\tdocument.getElementById('import-btn').disabled = true;\n\t\t}\n\n\t\tfunction showImportLoadingView() {\n\t\t\tdocument.getElementById('form-view').classList.add('hidden');\n\t\t\tdocument.getElementById('import-loading-view').classList.remove('hidden');\n\n\t\t\t// Reset stats\n\t\t\tdocument.getElementById('import-stat-success').textContent = '0';\n\t\t\tdocument.getElementById('import-stat-updated').textContent = '0';\n\t\t\tdocument.getElementById('import-stat-failed').textContent = '0';\n\t\t\tdocument.getElementById('import-progress-bar').style.width = '0%';\n\t\t\tdocument.getElementById('import-progress-text').textContent = '0 / 0';\n\t\t\tdocument.getElementById('import-current-code').querySelector('span').textContent = '-';\n\n\t\t\t// Reset phase indicators\n\t\t\tdocument.getElementById('phase-import-indicator').classList.add('bg-brand/10', 'text-brand');\n\t\t\tdocument.getElementById('phase-import-indicator').classList.remove('bg-surface-muted', 'text-brand-400', 'bg-green-100', 'text-green-700');\n\t\t\tdocument.getElementById('phase-crawl-indicator').classList.add('bg-surface-muted', 'text-brand-400');\n\t\t\tdocument.getElementById('phase-crawl-indicator').classList.remove('bg-brand/10', 'text-brand', 'bg-green-100', 'text-green-700');\n\t\t}\n\n\t\tfunction updateImportProgress(index, total, phase) {\n\t\t\tconst percentage = total > 0 ? ((index + 1) / total) * 100 : 0;\n\t\t\tdocument.getElementById('import-progress-text').textContent = (index) + ' / ' + total;\n\t\t\tdocument.getElementById('import-progress-bar').style.width = percentage + '%';\n\t\t}\n\n\t\tfunction setImportPhase(phase) {\n\t\t\tconst importIndicator = document.getElementById('phase-import-indicator');\n\t\t\tconst crawlIndicator = document.getElementById('phase-crawl-indicator');\n\t\t\tconst progressLabel = document.getElementById('import-progress-label');\n\t\t\tconst title = document.getElementById('import-loading-title');\n\t\t\tconst subtitle = document.getElementById('import-loading-subtitle');\n\t\t\tconst currentCodeIcon = document.getElementById('import-current-code').querySelector('svg');\n\n\t\t\tif (phase === 'crawl') {\n\t\t\t\t// Mark import as complete\n\t\t\t\timportIndicator.classList.remove('bg-brand/10', 'text-brand');\n\t\t\t\timportIndicator.classList.add('bg-green-100', 'text-green-700');\n\n\t\t\t\t// Activate crawl phase\n\t\t\t\tcrawlIndicator.classList.remove('bg-surface-muted', 'text-brand-400');\n\t\t\t\tcrawlIndicator.classList.add('bg-brand/10', 'text-brand');\n\n\t\t\t\tprogressLabel.textContent = 'Buscando dados dos produtos...';\n\t\t\t\ttitle.textContent = 'Buscando Dados';\n\t\t\t\tsubtitle.textContent = 'Coletando informacoes do site...';\n\n\t\t\t\t// Change icon to search\n\t\t\t\tcurrentCodeIcon.innerHTML = '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>';\n\n\t\t\t\t// Reset progress bar for crawl phase\n\t\t\t\tdocument.getElementById('import-progress-bar').style.width = '0%';\n\t\t\t\tdocument.getElementById('import-progress-text').textContent = '0 / 0';\n\t\t\t}\n\t\t}\n\n\t\tasync function importSpreadsheet() {\n\t\t\tif (!productFormState.selectedFile) return;\n\n\t\t\tshowImportLoadingView();\n\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('file', productFormState.selectedFile);\n\n\t\t\tlet createdCount = 0;\n\t\t\tlet updatedCount = 0;\n\t\t\tlet failedCount = 0;\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch('/products/import-stream', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData,\n\t\t\t\t\tcredentials: 'include'\n\t\t\t\t});\n\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error('Erro ao importar planilha');\n\t\t\t\t}\n\n\t\t\t\tconst reader = response.body.getReader();\n\t\t\t\tconst decoder = new TextDecoder();\n\t\t\t\tlet buffer = '';\n\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\tif (done) break;\n\n\t\t\t\t\tbuffer += decoder.decode(value, { stream: true });\n\t\t\t\t\tconst lines = buffer.split('\\n');\n\t\t\t\t\tbuffer = lines.pop() || '';\n\n\t\t\t\t\tlet eventType = '';\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line.startsWith('event: ')) {\n\t\t\t\t\t\t\teventType = line.slice(7).trim();\n\t\t\t\t\t\t} else if (line.startsWith('data: ') && eventType) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst data = JSON.parse(line.slice(6));\n\t\t\t\t\t\t\t\thandleImportEvent(eventType, data);\n\n\t\t\t\t\t\t\t\t// Update counts based on event\n\t\t\t\t\t\t\t\tif (eventType === 'import_success') {\n\t\t\t\t\t\t\t\t\tif (data.message === 'produto criado') {\n\t\t\t\t\t\t\t\t\t\tcreatedCount++;\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById('import-stat-success').textContent = createdCount;\n\t\t\t\t\t\t\t\t\t} else if (data.message === 'produto atualizado') {\n\t\t\t\t\t\t\t\t\t\tupdatedCount++;\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById('import-stat-updated').textContent = updatedCount;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (eventType === 'import_error') {\n\t\t\t\t\t\t\t\t\tfailedCount++;\n\t\t\t\t\t\t\t\t\tdocument.getElementById('import-stat-failed').textContent = failedCount;\n\t\t\t\t\t\t\t\t} else if (eventType === 'crawl_success') {\n\t\t\t\t\t\t\t\t\t// Keep success count updated\n\t\t\t\t\t\t\t\t} else if (eventType === 'crawl_error') {\n\t\t\t\t\t\t\t\t\tfailedCount++;\n\t\t\t\t\t\t\t\t\tdocument.getElementById('import-stat-failed').textContent = failedCount;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.error('Failed to parse SSE data:', e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventType = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Import error:', error);\n\t\t\t\tif (window.showToast) {\n\t\t\t\t\twindow.showToast('danger', 'Erro ao importar planilha');\n\t\t\t\t}\n\t\t\t\t// Return to form view on error\n\t\t\t\tdocument.getElementById('form-view').classList.remove('hidden');\n\t\t\t\tdocument.getElementById('import-loading-view').classList.add('hidden');\n\t\t\t}\n\t\t}\n\n\t\tfunction handleImportEvent(eventType, data) {\n\t\t\tswitch (eventType) {\n\t\t\t\tcase 'import_start':\n\t\t\t\t\tdocument.getElementById('import-progress-text').textContent = '0 / ' + data.total;\n\t\t\t\t\tdocument.getElementById('import-progress-label').textContent = 'Importando produtos...';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'import_processing':\n\t\t\t\t\tdocument.getElementById('import-current-code').querySelector('span').textContent = data.code;\n\t\t\t\t\tupdateImportProgress(data.index, data.total, 'import');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'import_success':\n\t\t\t\tcase 'import_error':\n\t\t\t\t\tupdateImportProgress(data.index, data.total, 'import');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'crawl_start':\n\t\t\t\t\tsetImportPhase('crawl');\n\t\t\t\t\tdocument.getElementById('import-progress-text').textContent = '0 / ' + data.total;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'crawl_processing':\n\t\t\t\t\tdocument.getElementById('import-current-code').querySelector('span').textContent = data.code;\n\t\t\t\t\tupdateImportProgress(data.index, data.total, 'crawl');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'crawl_success':\n\t\t\t\tcase 'crawl_error':\n\t\t\t\t\tupdateImportProgress(data.index, data.total, 'crawl');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'complete':\n\t\t\t\t\t// Mark crawl phase as complete\n\t\t\t\t\tdocument.getElementById('phase-crawl-indicator').classList.remove('bg-brand/10', 'text-brand');\n\t\t\t\t\tdocument.getElementById('phase-crawl-indicator').classList.add('bg-green-100', 'text-green-700');\n\n\t\t\t\t\tdocument.getElementById('import-current-code').querySelector('span').textContent = 'Concluido!';\n\t\t\t\t\tdocument.getElementById('import-loading-title').textContent = 'Importacao Concluida';\n\t\t\t\t\tdocument.getElementById('import-loading-subtitle').textContent = 'Todos os produtos foram processados';\n\n\t\t\t\t\t// Set flash toast and reload\n\t\t\t\t\tconst result = data.import_result || {};\n\t\t\t\t\tconst successText = [];\n\t\t\t\t\tif (result.created > 0) successText.push(result.created + ' criado(s)');\n\t\t\t\t\tif (result.updated > 0) successText.push(result.updated + ' atualizado(s)');\n\n\t\t\t\t\tconst message = successText.length > 0\n\t\t\t\t\t\t? 'Planilha importada: ' + successText.join(', ')\n\t\t\t\t\t\t: 'Planilha importada com sucesso';\n\n\t\t\t\t\tdocument.cookie = 'flash_toast=success|' + encodeURIComponent(message) + '; path=/; max-age=60';\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// File input change handler\n\t\tdocument.getElementById('file-input').addEventListener('change', function(e) {\n\t\t\thandleFileSelect(e.target.files[0]);\n\t\t});\n\n\t\t// Drag and drop handlers\n\t\tconst dropZone = document.getElementById('drop-zone');\n\n\t\tdropZone.addEventListener('dragover', function(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.classList.add('border-brand', 'bg-brand/5');\n\t\t});\n\n\t\tdropZone.addEventListener('dragleave', function(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.classList.remove('border-brand', 'bg-brand/5');\n\t\t});\n\n\t\tdropZone.addEventListener('drop', function(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.classList.remove('border-brand', 'bg-brand/5');\n\t\t\tif (e.dataTransfer.files.length > 0) {\n\t\t\t\thandleFileSelect(e.dataTransfer.files[0]);\n\t\t\t}\n\t\t});\n\n\t\t// Import button click handler\n\t\tdocument.getElementById('import-btn').addEventListener('click', importSpreadsheet);\n\n\t\tconst icons = {\n\t\t\tspinner: '<svg class=\"w-4 h-4 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>',\n\t\t\tcheck: '<svg class=\"w-4 h-4 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path></svg>',\n\t\t\terror: '<svg class=\"w-4 h-4 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg>',\n\t\t\tdot: '<svg class=\"w-4 h-4 text-brand-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle></svg>'\n\t\t};\n\n\t\tfunction addCode() {\n\t\t\tconst input = document.getElementById('code-input');\n\t\t\tconst select = document.getElementById('codes-select');\n\t\t\tconst code = input.value.trim().toUpperCase();\n\n\t\t\tif (code === '') return;\n\n\t\t\tconst exists = Array.from(select.options).some(opt => opt.value === code);\n\t\t\tif (exists) {\n\t\t\t\tinput.value = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst option = document.createElement('option');\n\t\t\toption.value = code;\n\t\t\toption.text = code;\n\t\t\toption.selected = true;\n\t\t\tselect.appendChild(option);\n\t\t\tinput.value = '';\n\t\t\tinput.focus();\n\t\t\tupdateCount();\n\t\t}\n\n\t\tfunction updateCount() {\n\t\t\tconst select = document.getElementById('codes-select');\n\t\t\tconst count = document.getElementById('codes-count');\n\t\t\tcount.textContent = '(' + select.options.length + ')';\n\t\t}\n\n\t\tfunction showLoadingView(codes) {\n\t\t\tproductFormState.codes = codes;\n\n\t\t\tdocument.getElementById('form-view').classList.add('hidden');\n\t\t\tdocument.getElementById('loading-view').classList.remove('hidden');\n\n\t\t\tconst queue = document.getElementById('codes-queue');\n\t\t\tqueue.innerHTML = codes.map(function(code, index) {\n\t\t\t\treturn '<div id=\"code-item-' + index + '\" class=\"px-4 py-2.5 border-b border-sidebar-border last:border-b-0 flex items-center gap-3 text-sm font-mono text-brand-500\">' +\n\t\t\t\t\t'<span id=\"code-icon-' + index + '\" class=\"w-5 h-5 flex items-center justify-center\">' + icons.dot + '</span>' +\n\t\t\t\t\t'<span id=\"code-text-' + index + '\">' + code + '</span>' +\n\t\t\t\t'</div>';\n\t\t\t}).join('');\n\n\t\t\tdocument.getElementById('current-code').querySelector('span').textContent = '-';\n\t\t\tdocument.getElementById('progress-text').textContent = '0 / ' + codes.length;\n\t\t\tdocument.getElementById('progress-bar').style.width = '0%';\n\t\t}\n\n\t\tfunction updateItemStatus(index, status) {\n\t\t\tconst item = document.getElementById('code-item-' + index);\n\t\t\tconst iconEl = document.getElementById('code-icon-' + index);\n\t\t\tif (!item || !iconEl) return;\n\n\t\t\titem.classList.remove('bg-brand/5', 'text-brand', 'text-brand-500', 'text-green-600', 'bg-green-50', 'text-red-600', 'bg-red-50');\n\n\t\t\tswitch (status) {\n\t\t\t\tcase 'processing':\n\t\t\t\t\titem.classList.add('bg-brand/5', 'text-brand');\n\t\t\t\t\ticonEl.innerHTML = icons.spinner;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'success':\n\t\t\t\t\titem.classList.add('text-green-600', 'bg-green-50');\n\t\t\t\t\ticonEl.innerHTML = icons.check;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'error':\n\t\t\t\t\titem.classList.add('text-red-600', 'bg-red-50');\n\t\t\t\t\ticonEl.innerHTML = icons.error;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\titem.classList.add('text-brand-500');\n\t\t\t\t\ticonEl.innerHTML = icons.dot;\n\t\t\t}\n\t\t}\n\n\t\tfunction updateProgress(current, total) {\n\t\t\tconst percentage = total > 0 ? ((current + 1) / total) * 100 : 0;\n\t\t\tdocument.getElementById('progress-text').textContent = (current + 1) + ' / ' + total;\n\t\t\tdocument.getElementById('progress-bar').style.width = percentage + '%';\n\t\t}\n\n\t\tfunction startSSE(codes) {\n\t\t\tconst params = codes.map(c => 'codes=' + encodeURIComponent(c)).join('&');\n\t\t\tconst url = '/products/add-stream?' + params;\n\n\t\t\tproductFormState.eventSource = new EventSource(url);\n\n\t\t\tproductFormState.eventSource.addEventListener('start', function(e) {\n\t\t\t\tconst data = JSON.parse(e.data);\n\t\t\t\tdocument.getElementById('progress-text').textContent = '0 / ' + data.total;\n\t\t\t});\n\n\t\t\tproductFormState.eventSource.addEventListener('processing', function(e) {\n\t\t\t\tconst data = JSON.parse(e.data);\n\t\t\t\tupdateItemStatus(data.index, 'processing');\n\t\t\t\tdocument.getElementById('current-code').querySelector('span').textContent = data.code;\n\t\t\t});\n\n\t\t\tproductFormState.eventSource.addEventListener('success', function(e) {\n\t\t\t\tconst data = JSON.parse(e.data);\n\t\t\t\tupdateItemStatus(data.index, 'success');\n\t\t\t\tupdateProgress(data.index, data.total);\n\t\t\t});\n\n\t\t\tproductFormState.eventSource.addEventListener('error', function(e) {\n\t\t\t\tif (e.data) {\n\t\t\t\t\tconst data = JSON.parse(e.data);\n\t\t\t\t\tupdateItemStatus(data.index, 'error');\n\t\t\t\t\tupdateProgress(data.index, data.total);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tproductFormState.eventSource.addEventListener('complete', function(e) {\n\t\t\t\tconst data = JSON.parse(e.data);\n\t\t\t\tstopSSE();\n\n\t\t\t\t// Update progress to 100%\n\t\t\t\tdocument.getElementById('progress-text').textContent = data.total + ' / ' + data.total;\n\t\t\t\tdocument.getElementById('progress-bar').style.width = '100%';\n\t\t\t\tdocument.getElementById('current-code').querySelector('span').textContent = 'Concluído!';\n\n\t\t\t\t// Set flash toast cookie for after reload\n\t\t\t\tconst successCount = data.added || data.total;\n\t\t\t\tconst message = successCount === 1\n\t\t\t\t\t? '1 produto adicionado com sucesso'\n\t\t\t\t\t: successCount + ' produtos adicionados com sucesso';\n\t\t\t\tdocument.cookie = 'flash_toast=success|' + encodeURIComponent(message) + '; path=/; max-age=60';\n\n\t\t\t\t// Reload page after a short delay\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}, 500);\n\t\t\t});\n\n\t\t\tproductFormState.eventSource.onerror = function(e) {\n\t\t\t\tconsole.error('SSE error:', e);\n\t\t\t\tstopSSE();\n\t\t\t\tif (window.showToast) {\n\t\t\t\t\twindow.showToast('danger', 'Erro ao conectar com o servidor');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfunction stopSSE() {\n\t\t\tif (productFormState.eventSource) {\n\t\t\t\tproductFormState.eventSource.close();\n\t\t\t\tproductFormState.eventSource = null;\n\t\t\t}\n\t\t}\n\n\t\tdocument.getElementById('code-input').addEventListener('keypress', function(e) {\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\te.preventDefault();\n\t\t\t\taddCode();\n\t\t\t}\n\t\t});\n\n\t\tdocument.getElementById('codes-select').addEventListener('keydown', function(e) {\n\t\t\tif (e.key === 'Delete' || e.key === 'Backspace') {\n\t\t\t\tconst select = e.target;\n\t\t\t\tconst selectedOptions = Array.from(select.selectedOptions);\n\t\t\t\tselectedOptions.forEach(opt => opt.remove());\n\t\t\t\tupdateCount();\n\t\t\t}\n\t\t});\n\n\t\tdocument.getElementById('submit-btn').addEventListener('click', function() {\n\t\t\tconst select = document.getElementById('codes-select');\n\t\t\tconst codes = Array.from(select.options).map(opt => opt.value);\n\n\t\t\tif (codes.length === 0) return;\n\n\t\t\tshowLoadingView(codes);\n\t\t\tstartSSE(codes);\n\t\t});\n\n\t\tdocument.addEventListener('keydown', function(e) {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tstopSSE();\n\t\t\t\tconst modal = document.getElementById('product-modal');\n\t\t\t\tif (modal) modal.remove();\n\t\t\t}\n\t\t});\n\n\t\tdocument.getElementById('product-modal').addEventListener('click', function(e) {\n\t\t\tif (e.target === this) {\n\t\t\t\tstopSSE();\n\t\t\t\tthis.remove();\n\t\t\t}\n\t\t});\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
